// 高级音乐播放器样式
.card-music-player
  .music-player-container
    position: relative
    background: var(--efu-card-bg)
    border-radius: 12px
    overflow: hidden
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1)
    
    .player-main
      padding: 16px
      border-bottom: 1px solid var(--efu-border)
      
      .player-info
        display: flex
        align-items: center
        justify-content: space-between
        margin-bottom: 12px
        
        .song-info
          flex: 1
          min-width: 0
          
          .song-title
            font-size: 14px
            font-weight: 600
            color: var(--efu-fontcolor)
            margin-bottom: 4px
            white-space: nowrap
            overflow: hidden
            text-overflow: ellipsis
            
          .song-artist
            font-size: 12px
            color: var(--efu-secondtext)
            white-space: nowrap
            overflow: hidden
            text-overflow: ellipsis
            
        .player-controls
          display: flex
          gap: 8px
          
          .player-btn
            width: 36px
            height: 36px
            border: none
            border-radius: 50%
            background: var(--efu-main)
            color: white
            cursor: pointer
            transition: all 0.3s ease
            display: flex
            align-items: center
            justify-content: center
            
            &:hover
              transform: scale(1.1)
              box-shadow: 0 4px 12px rgba(var(--efu-main-rgb), 0.4)
              
            &#play-btn
              width: 44px
              height: 44px
              
      .player-progress
        margin-bottom: 12px
        
        .progress-bar
          position: relative
          height: 4px
          background: var(--efu-border)
          border-radius: 2px
          margin-bottom: 8px
          
          .progress-filled
            height: 100%
            background: var(--efu-main)
            border-radius: 2px
            width: 0%
            transition: width 0.1s ease
            
          .progress-input
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%
            opacity: 0
            cursor: pointer
            
        .time-display
          display: flex
          justify-content: space-between
          font-size: 12px
          color: var(--efu-secondtext)
          
      .player-volume
        display: flex
        align-items: center
        gap: 8px
        margin-bottom: 12px
        
        i
          color: var(--efu-secondtext)
          font-size: 14px
          
        .volume-slider
          flex: 1
          height: 4px
          background: var(--efu-border)
          border-radius: 2px
          outline: none
          cursor: pointer
          
          &::-webkit-slider-thumb
            appearance: none
            width: 12px
            height: 12px
            background: var(--efu-main)
            border-radius: 50%
            cursor: pointer
            
      .player-mode
        display: flex
        align-items: center
        gap: 8px
        
        .mode-btn
          width: 28px
          height: 28px
          border: none
          border-radius: 50%
          background: var(--efu-secondbg)
          color: var(--efu-fontcolor)
          cursor: pointer
          transition: all 0.3s ease
          display: flex
          align-items: center
          justify-content: center
          
          &:hover
            background: var(--efu-main)
            color: white
            
        .mode-text
          font-size: 12px
          color: var(--efu-secondtext)
          
    .player-playlist
      .playlist-header
        display: flex
        align-items: center
        justify-content: space-between
        padding: 12px 16px
        background: var(--efu-secondbg)
        border-bottom: 1px solid var(--efu-border)
        
        span
          font-size: 14px
          font-weight: 600
          color: var(--efu-fontcolor)
          
        .playlist-toggle, .edit-btn
          width: 24px
          height: 24px
          border: none
          background: transparent
          color: var(--efu-secondtext)
          cursor: pointer
          transition: color 0.3s ease
          display: flex
          align-items: center
          justify-content: center
          
          &:hover
            color: var(--efu-main)
            
      .playlist-search
        padding: 12px 16px
        border-bottom: 1px solid var(--efu-border)
        
        .search-input
          width: 100%
          padding: 8px 12px
          border: 1px solid var(--efu-border)
          border-radius: 6px
          background: var(--efu-card-bg)
          color: var(--efu-fontcolor)
          font-size: 12px
          
          &:focus
            outline: none
            border-color: var(--efu-main)
            
      .playlist-content
        max-height: 200px
        overflow-y: auto
        
        .playlist-item
          display: flex
          align-items: center
          justify-content: space-between
          padding: 12px 16px
          cursor: pointer
          transition: background 0.3s ease
          border-bottom: 1px solid var(--efu-border)
          
          &:hover
            background: var(--efu-secondbg)
            
          &.playing
            background: rgba(var(--efu-main-rgb), 0.1)
            border-left: 3px solid var(--efu-main)
            
          .item-info
            flex: 1
            min-width: 0
            
            .item-title
              font-size: 13px
              color: var(--efu-fontcolor)
              margin-bottom: 2px
              white-space: nowrap
              overflow: hidden
              text-overflow: ellipsis
              
            .item-artist
              font-size: 11px
              color: var(--efu-secondtext)
              white-space: nowrap
              overflow: hidden
              text-overflow: ellipsis
              
          .item-duration
            font-size: 11px
            color: var(--efu-secondtext)
            margin-left: 8px
            
    .player-edit
      position: absolute
      top: 0
      left: 0
      width: 100%
      height: 100%
      background: var(--efu-card-bg)
      z-index: 10
      display: none
      
      &.show
        display: block
        
      .edit-header
        display: flex
        align-items: center
        justify-content: space-between
        padding: 16px
        border-bottom: 1px solid var(--efu-border)
        
        span
          font-size: 14px
          font-weight: 600
          color: var(--efu-fontcolor)
          
        .close-edit
          width: 24px
          height: 24px
          border: none
          background: transparent
          color: var(--efu-secondtext)
          cursor: pointer
          transition: color 0.3s ease
          display: flex
          align-items: center
          justify-content: center
          
          &:hover
            color: var(--efu-main)
            
      .edit-content
        padding: 16px
        
        .edit-form
          margin-bottom: 16px
          
          .edit-input
            width: 100%
            padding: 8px 12px
            border: 1px solid var(--efu-border)
            border-radius: 6px
            background: var(--efu-card-bg)
            color: var(--efu-fontcolor)
            font-size: 12px
            margin-bottom: 8px
            
            &:focus
              outline: none
              border-color: var(--efu-main)
              
          .add-song-btn
            width: 100%
            padding: 8px 12px
            border: none
            border-radius: 6px
            background: var(--efu-main)
            color: white
            font-size: 12px
            cursor: pointer
            transition: background 0.3s ease
            
            &:hover
              background: var(--efu-hovertext)
              
        .edit-list
          .edit-item
            display: flex
            align-items: center
            justify-content: space-between
            padding: 8px 0
            border-bottom: 1px solid var(--efu-border)
            
            .edit-item-info
              flex: 1
              font-size: 12px
              color: var(--efu-fontcolor)
              
            .remove-song-btn
              width: 20px
              height: 20px
              border: none
              background: transparent
              color: #ff4757
              cursor: pointer
              transition: color 0.3s ease
              display: flex
              align-items: center
              justify-content: center
              
              &:hover
                color: #ff3742

// 响应式设计
@media (max-width: 768px)
  .card-music-player
    .music-player-container
      .player-main
        .player-info
          flex-direction: column
          align-items: flex-start
          gap: 8px
          
          .player-controls
            align-self: center
            
      .player-playlist
        .playlist-content
          max-height: 150px 