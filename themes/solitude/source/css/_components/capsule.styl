#nav-music
  position: fixed
  bottom: 20px
  left: 20px
  z-index: 9999
  display: block
  margin: 0
  padding: 0
  width: auto
  height: auto
  background: none
  color: var(--efu-fontcolor)
  border-radius: 0
  transition: none
  box-shadow: none
  backdrop-filter: none
  font-size: 15px
  min-width: auto

  .nav-music-capsule
    display: none
    align-items: center
    gap: 6px
    padding: 0 16px
    font-weight: 600
    font-size: 15px
    letter-spacing: 1px
    .capsule-icon
      font-size: 18px
      margin-right: 2px
    .capsule-text
      font-size: 15px
      color: var(--efu-main)

  &:hover
    transform: none
    box-shadow: none
    background: none
    color: var(--efu-fontcolor)

  &.playing
    box-shadow: none
    background: none
    color: var(--efu-fontcolor)

  &.expanded
    display: block

  // 底部胶囊播放器优化 - 带伸缩功能
  meting-js
    .aplayer
      // 增加宽度，确保不遮挡右侧按键
      width: calc(100vw - 40px) !important
      min-width: calc(100vw - 40px) !important
      max-width: calc(100vw - 40px) !important
      position: fixed !important
      bottom: 20px !important
      left: 20px !important
      z-index: 9998 !important
      background: var(--efu-card-bg) !important
      border: 1px solid var(--efu-border) !important
      border-radius: 12px !important
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1) !important
      transition: all 0.3s ease !important
      
      // 收缩状态样式
      &.collapsed
        width: 60px !important
        min-width: 60px !important
        max-width: 60px !important
        height: 60px !important
        border-radius: 50% !important
        overflow: hidden !important
        
        .aplayer-info,
        .aplayer-controller,
        .aplayer-bar-wrap,
        .aplayer-time
          display: none !important
        
        .aplayer-pic
          display: block !important
          width: 60px !important
          height: 60px !important
          border-radius: 50% !important
          overflow: hidden !important
          
          img
            width: 100% !important
            height: 100% !important
            object-fit: cover !important
        
        .collapse-btn
          display: none !important
        
        .expand-btn
          display: block !important
          position: absolute !important
          top: 50% !important
          left: 50% !important
          transform: translate(-50%, -50%) !important
          font-size: 20px !important
          color: #4caf50 !important
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important
          cursor: pointer !important
          z-index: 10000 !important
          background: rgba(255, 255, 255, 0.9) !important
          border-radius: 50% !important
          width: 30px !important
          height: 30px !important
          display: flex !important
          align-items: center !important
          justify-content: center !important
          transition: all 0.3s ease !important
          
          &:hover
            background: rgba(255, 255, 255, 1) !important
            transform: translate(-50%, -50%) scale(1.1) !important
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4) !important
      
      // 确保播放器内容布局合理 - 优化为左右布局
      .aplayer-info
        width: 100% !important
        display: flex !important
        flex-direction: row !important
        padding: 12px 12px !important
        position: relative !important
        align-items: flex-start !important
        gap: 12px !important
        
        // 左侧音乐信息区域
        .aplayer-music
          flex: 1 !important
          margin-bottom: 0 !important
          min-width: 0 !important
          
          .aplayer-title
            max-width: 280px !important
            overflow: hidden !important
            text-overflow: ellipsis !important
            white-space: nowrap !important
            font-size: 14px !important
            font-weight: 600 !important
            line-height: 1.4 !important
            margin-bottom: 4px !important
            
          .aplayer-author
            max-width: 280px !important
            overflow: hidden !important
            text-overflow: ellipsis !important
            white-space: nowrap !important
            font-size: 12px !important
            color: #666 !important
            line-height: 1.4 !important
        
        // 右侧控制区域 - 包含进度条和控制按钮
        .aplayer-controller
          flex: 1 !important
          display: flex !important
          flex-direction: column !important
          align-items: flex-start !important
          justify-content: flex-start !important
          padding: 0 !important
          gap: 8px !important
          border-top: none !important
          min-width: 0 !important
          
          // 播放控制按钮组 - 左侧布局优化
          .aplayer-icon-back,
          .aplayer-icon-play,
          .aplayer-icon-forward
            display: inline-block !important
            opacity: 1 !important
            visibility: visible !important
            cursor: pointer !important
            margin: 0 3px !important
            font-size: 16px !important
            color: #333 !important
            transition: all 0.3s ease !important
            background: #f8f9fa !important
            border-radius: 6px !important
            padding: 6px !important
            border: 2px solid #e9ecef !important
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important
            
            &:hover
              color: #ff6b6b !important
              transform: scale(1.1) !important
              background: #fff5f5 !important
              border-color: #ff6b6b !important
              box-shadow: 0 4px 8px rgba(255, 107, 107, 0.3) !important
          
          // 播放模式按钮组 - 左侧布局
          .aplayer-icon-order,
          .aplayer-icon-loop,
          .aplayer-icon-menu
            display: inline-block !important
            opacity: 1 !important
            visibility: visible !important
            cursor: pointer !important
            margin: 0 2px !important
            font-size: 14px !important
            color: #333 !important
            transition: all 0.3s ease !important
            background: #f8f9fa !important
            border-radius: 6px !important
            padding: 6px !important
            border: 2px solid #e9ecef !important
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important
            
            &:hover
              color: #4caf50 !important
              transform: scale(1.1) !important
              background: #f1f8e9 !important
              border-color: #4caf50 !important
              box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3) !important
          
          // 音量控制 - 左侧布局优化
          .aplayer-volume-wrap
            display: flex !important
            align-items: center !important
            opacity: 1 !important
            visibility: visible !important
            margin-left: 4px !important
            position: relative !important
            
            .aplayer-volume-bar-wrap
              display: block !important
              opacity: 1 !important
              width: 60px !important
              margin-right: 6px !important
              
              .aplayer-volume-bar
                display: block !important
                opacity: 1 !important
                height: 10px !important
                background: #e0e0e0 !important
                border-radius: 5px !important
                cursor: pointer !important
                border: 2px solid #ccc !important
                position: relative !important
                transition: all 0.3s ease !important
                
                &:hover
                  border-color: #4ecdc4 !important
                  box-shadow: 0 2px 8px rgba(78, 205, 196, 0.3) !important
                
                .aplayer-volume
                  display: block !important
                  opacity: 1 !important
                  background: linear-gradient(90deg, #4ecdc4, #44a08d) !important
                  border-radius: 5px !important
                  height: 100% !important
                  transition: all 0.3s ease !important
                  
                .aplayer-volume-thumb
                  display: block !important
                  opacity: 1 !important
                  background: #4ecdc4 !important
                  border-radius: 50% !important
                  width: 16px !important
                  height: 16px !important
                  top: -3px !important
                  box-shadow: 0 2px 8px rgba(78, 205, 196, 0.5) !important
                  border: 3px solid #fff !important
                  cursor: pointer !important
                  transition: all 0.3s ease !important
                  
                  &:hover
                    transform: scale(1.2) !important
                    box-shadow: 0 4px 12px rgba(78, 205, 196, 0.6) !important
              
            .aplayer-icon-volume-down,
            .aplayer-icon-volume-up
              display: inline-block !important
              opacity: 1 !important
              cursor: pointer !important
              margin-left: 4px !important
              font-size: 16px !important
              color: #333 !important
              background: #f8f9fa !important
              border-radius: 8px !important
              padding: 8px !important
              border: 2px solid #e9ecef !important
              transition: all 0.3s ease !important
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important
              
              &:hover
                color: #4ecdc4 !important
                background: #e8f5f4 !important
                border-color: #4ecdc4 !important
                transform: scale(1.1) !important
                box-shadow: 0 4px 8px rgba(78, 205, 196, 0.3) !important
                
              &:active
                transform: scale(0.95) !important
                
            // 音量显示样式
            .volume-display
              position: absolute !important
              top: -35px !important
              right: 0 !important
              background: rgba(0, 0, 0, 0.9) !important
              color: white !important
              padding: 6px 10px !important
              border-radius: 6px !important
              font-size: 12px !important
              font-weight: 600 !important
              opacity: 0 !important
              transition: all 0.3s ease !important
              pointer-events: none !important
              z-index: 1000 !important
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important
              border: 1px solid rgba(255, 255, 255, 0.2) !important
              
              &::after
                content: '' !important
                position: absolute !important
                top: 100% !important
                right: 10px !important
                border: 5px solid transparent !important
                border-top-color: rgba(0, 0, 0, 0.9) !important
      
      // 进度条优化 - 左侧布局
      .aplayer-bar-wrap
        display: block !important
        opacity: 1 !important
        visibility: visible !important
        margin: 0 !important
        padding: 4px 0 !important
        width: 100% !important
        
        .aplayer-bar
          display: block !important
          opacity: 1 !important
          height: 10px !important
          background: #e0e0e0 !important
          border-radius: 5px !important
          cursor: pointer !important
          border: 2px solid #ccc !important
          position: relative !important
          
          .aplayer-played
            display: block !important
            opacity: 1 !important
            background: linear-gradient(90deg, #ff6b6b, #ff8e53) !important
            border-radius: 5px !important
            height: 100% !important
            
          .aplayer-thumb
            display: block !important
            opacity: 1 !important
            background: #ff4757 !important
            border-radius: 50% !important
            width: 18px !important
            height: 18px !important
            top: -4px !important
            box-shadow: 0 3px 8px rgba(255, 71, 87, 0.4) !important
            border: 3px solid #fff !important
            cursor: pointer !important
            
          .aplayer-loaded
            display: block !important
            opacity: 1 !important
            background: #d0d0d0 !important
            border-radius: 5px !important
      
      // 时间显示 - 左侧布局
      .aplayer-time
        display: flex !important
        opacity: 1 !important
        visibility: visible !important
        justify-content: space-between !important
        font-size: 11px !important
        color: #666 !important
        margin: 0 0 4px 0 !important
        font-weight: 500 !important
        
        .aplayer-ptime,
        .aplayer-dtime
          display: inline-block !important
          opacity: 1 !important
      
      // 歌词区域优化 - 扩大显示区域，往上移动
      .aplayer-lrc
        display: block !important
        opacity: 1 !important
        visibility: visible !important
        height: 120px !important
        max-height: 120px !important
        overflow: hidden !important
        margin: 4px 12px !important
        padding: 12px !important
        background: #f8f9fa !important
        border-radius: 8px !important
        border: 1px solid #e9ecef !important
        
        .aplayer-lrc-contents
          display: block !important
          opacity: 1 !important
          
          p
            display: block !important
            opacity: 0.7 !important
            font-size: 14px !important
            line-height: 1.8 !important
            margin: 6px 0 !important
            color: #333 !important
            transition: all 0.3s ease !important
            
            &.aplayer-lrc-current
              opacity: 1 !important
              color: #0066cc !important
              font-weight: 600 !important
              font-size: 16px !important
      
      // 收缩按钮 - 右上角，绿色主题
      .collapse-btn
        position: absolute !important
        top: 8px !important
        right: 8px !important
        width: 28px !important
        height: 28px !important
        background: rgba(76, 175, 80, 0.9) !important
        border-radius: 50% !important
        display: flex !important
        align-items: center !important
        justify-content: center !important
        cursor: pointer !important
        z-index: 10001 !important
        transition: all 0.3s ease !important
        border: 2px solid rgba(76, 175, 80, 0.5) !important
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important
        
        &:hover
          background: rgba(76, 175, 80, 1) !important
          transform: scale(1.2) !important
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.5) !important
        
        &::before
          content: "−" !important
          color: #fff !important
          font-size: 18px !important
          font-weight: bold !important
          line-height: 1 !important
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important
      
      // 展开按钮 - 胶囊状态
      .expand-btn
        display: none !important

// 移动端适配
@media (max-width: 768px)
  #nav-music
    bottom: 15px
    left: 15px
    transform: none
    min-width: auto
    .nav-music-capsule
      display: none
    
    meting-js
      .aplayer
        width: calc(100vw - 30px) !important
        min-width: calc(100vw - 30px) !important
        max-width: calc(100vw - 30px) !important
        bottom: 15px !important
        left: 15px !important
        
        &.collapsed
          width: 50px !important
          min-width: 50px !important
          max-width: 50px !important
          height: 50px !important
          
          .aplayer-pic
            width: 50px !important
            height: 50px !important
        
        .aplayer-info
          padding: 8px 10px !important
          flex-direction: row !important
          gap: 10px !important
          
          .aplayer-music
            margin-bottom: 0 !important
            flex: 1 !important
            
            .aplayer-title
              max-width: 200px !important
              font-size: 13px !important
              
            .aplayer-author
              max-width: 200px !important
              font-size: 11px !important
          
          .aplayer-controller
            flex: 1 !important
            align-items: flex-start !important
            gap: 6px !important
        
        .aplayer-controller
          padding: 0 !important
          gap: 6px !important
          
          .aplayer-icon-back,
          .aplayer-icon-play,
          .aplayer-icon-forward,
          .aplayer-icon-order,
          .aplayer-icon-loop,
          .aplayer-icon-menu
            font-size: 14px !important
            margin: 0 1px !important
            padding: 4px !important
        
        .aplayer-volume-wrap
          margin-left: 2px !important
          
          .aplayer-volume-bar-wrap
            width: 50px !important
            
            .aplayer-volume-bar
              height: 8px !important
              
              .aplayer-volume-thumb
                width: 14px !important
                height: 14px !important
          
          .aplayer-icon-volume-down,
          .aplayer-icon-volume-up
            font-size: 12px !important
            margin-left: 2px !important
            padding: 6px !important
            
          .volume-display
            top: -30px !important
            padding: 4px 8px !important
            font-size: 10px !important
        
        .collapse-btn
          width: 20px !important
          height: 20px !important
          top: 6px !important
          right: 6px !important
          background: rgba(76, 175, 80, 0.8) !important
          border: 2px solid rgba(76, 175, 80, 0.3) !important
          
          &:hover
            background: rgba(76, 175, 80, 1) !important
            transform: scale(1.1) !important
          
          &::before
            font-size: 14px !important
            color: #fff !important 