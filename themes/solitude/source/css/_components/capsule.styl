@keyframes changeright
  0%, 50%, 100%
    transform: rotate(0deg) scale(1.1)
    box-shadow: 0 0 2px #ffffff00
  25%, 75%
    transform: rotate(90deg) scale(1.1)
    box-shadow: 0 0 14px #ffffff

@keyframes playingShadow
  0%, 100%
    box-shadow: 0 0px 12px -3px var(--efu-none)
  50%
    box-shadow: 0 0px 12px 0px var(--efu-music)

@keyframes lightBar
  0%, 100%
    opacity: 0.1
  60%
    opacity: 0.3

.aplayer.aplayer-narrow
  .aplayer-body,
  .aplayer-pic
    height: 66px
    width: 66px

#nav-music
  position: fixed
  bottom: 20px
  left: 20px
  z-index: 9999
  display: flex
  align-items: center
  margin: 0
  padding: 0
  width: auto
  height: 36px
  background-color: var(--efu-card-bg)
  color: var(--efu-fontcolor)
  cursor: pointer
  border-radius: 18px
  transition: all 0.3s ease 0s
  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.1)
  backdrop-filter: blur(10px)
  font-size: 15px
  min-width: 80px

  .nav-music-capsule
    display: flex
    align-items: center
    gap: 6px
    padding: 0 16px
    font-weight: 600
    font-size: 15px
    letter-spacing: 1px
    .capsule-icon
      font-size: 18px
      margin-right: 2px
    .capsule-text
      font-size: 15px
      color: var(--efu-main)

  &:hover
    transform: translateY(-3px)
    box-shadow: 0 5px 20px 0 rgba(0, 0, 0, 0.15)
    background: var(--efu-main)
    color: #fff
    .capsule-text
      color: #fff

  &.playing
    box-shadow: 0 0px 12px -3px var(--efu-main)
    background: var(--efu-main)
    color: #fff
    .capsule-text
      color: #fff

  &.expanded
    display: none

#local-music-player
  display: none
  position: fixed
  bottom: 20px
  left: 20px
  width: 370px
  background: #f7f7fa // Êõ¥Ê∑±ËÉåÊôØËâ≤
  border-radius: 12px
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.16)
  z-index: 9998
  backdrop-filter: blur(10px)
  border: 1px solid var(--efu-border)
  opacity: 0
  visibility: hidden
  transform: translateY(20px)
  transition: all 0.3s ease

  &.expanded
    display: block
    opacity: 1
    visibility: visible
    transform: translateY(0)

  .aplayer-header
    padding: 12px 18px
    border-bottom: 1px solid var(--efu-border)
    background: linear-gradient(45deg, var(--efu-main), var(--efu-second))
    border-radius: 12px 12px 0 0
    display: flex
    align-items: center
    justify-content: center
    .aplayer-title
      font-size: 18px
      font-weight: 700
      color: white
      text-align: center
      margin: 0
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3)
      display: flex
      align-items: center
      gap: 8px
      .music-icon
        font-size: 22px

  .aplayer-body
    display: flex
    align-items: center
    padding: 18px
    gap: 16px

  .aplayer-pic
    position: relative
    width: 60px
    height: 60px
    margin-right: 10px
    border-radius: 8px
    overflow: hidden
    background: linear-gradient(45deg, var(--efu-main), var(--efu-second))
    transition: transform 0.3s ease
    flex-shrink: 0
    .aplayer-button
      position: absolute
      top: 50%
      left: 50%
      transform: translate(-50%, -50%)
      width: 36px
      height: 36px
      background: #fff
      border-radius: 50%
      cursor: pointer
      display: flex
      align-items: center
      justify-content: center
      transition: all 0.3s ease
      font-size: 22px
      box-shadow: 0 2px 8px rgba(0,0,0,0.08)
      &:hover
        background: #f0f0f0
        transform: translate(-50%, -50%) scale(1.1)
      &::before
        content: "‚ñ∂"
        font-size: 22px
        color: var(--efu-main)
      &.aplayer-pause::before
        content: "‚è∏"

  .aplayer-info
    flex: 1
    min-width: 0
    display: flex
    flex-direction: column
    gap: 8px

  .aplayer-music
    margin-bottom: 2px
    .aplayer-title
      display: block
      font-size: 18px
      font-weight: bold
      color: #222
      margin-bottom: 2px
      white-space: nowrap
      overflow: hidden
      text-overflow: ellipsis
    .aplayer-author
      display: block
      font-size: 14px
      color: #666
      white-space: nowrap
      overflow: hidden
      text-overflow: ellipsis

  .aplayer-controller
    display: flex
    align-items: center
    gap: 14px
    margin-top: 4px

  .aplayer-bar-wrap
    flex: 1
    height: 6px
    background: #e0e0e0
    border-radius: 3px
    cursor: pointer
    position: relative
    .aplayer-bar
      height: 100%
      background: var(--efu-main)
      border-radius: 3px
      width: 0%
      transition: width 0.1s ease

  .aplayer-time
    font-size: 13px
    color: #888
    white-space: nowrap
    margin-left: 8px

  .aplayer-controls
    display: flex
    gap: 12px
    align-items: center
    margin-left: 8px
    button.aplayer-prev,
    button.aplayer-next,
    button.aplayer-playpause
      background: #fff
      border: 1px solid #e0e0e0
      color: var(--efu-main)
      font-size: 22px
      cursor: pointer
      padding: 4px 12px
      border-radius: 6px
      transition: background 0.2s, border 0.2s
      box-shadow: 0 1px 4px rgba(0,0,0,0.06)
      &:hover
        background: var(--efu-main)
        color: #fff
        border: 1px solid var(--efu-main)
    button.aplayer-playpause
      font-size: 26px
      color: var(--efu-main)
      font-weight: bold

  .aplayer-mode,
  .aplayer-list-btn
    width: 28px
    height: 28px
    cursor: pointer
    opacity: 0.9
    transition: opacity 0.3s ease
    position: relative
    font-size: 20px
    display: flex
    align-items: center
    justify-content: center
    background: #fff
    border-radius: 6px
    border: 1px solid #e0e0e0
    box-shadow: 0 1px 4px rgba(0,0,0,0.06)
    &:hover
      opacity: 1
      background: var(--efu-main)
      color: #fff
      border: 1px solid var(--efu-main)
    &.aplayer-mode-list::before
      content: "üîÅ"
    &.aplayer-mode-single::before
      content: "üîÇ"
    &.aplayer-mode-random::before
      content: "üîÄ"

  .aplayer-volume-wrap
    position: relative
    display: flex
    align-items: center
    gap: 4px
    .aplayer-volume-button
      width: 20px
      height: 20px
      cursor: pointer
      opacity: 0.9
      transition: opacity 0.3s ease
      position: relative
      font-size: 18px
      display: flex
      align-items: center
      justify-content: center
      background: #fff
      border-radius: 6px
      border: 1px solid #e0e0e0
      box-shadow: 0 1px 4px rgba(0,0,0,0.06)
      &:hover
        opacity: 1
        background: var(--efu-main)
        color: #fff
        border: 1px solid var(--efu-main)
      &::before
        content: "üîä"
      &.aplayer-volume-mute::before
        content: "üîá"
    .aplayer-volume-bar-wrap
      width: 48px
      height: 8px
      background: #e0e0e0
      border-radius: 4px
      cursor: pointer
      position: relative
      opacity: 0.9
      transition: opacity 0.3s ease
      &:hover
        opacity: 1
      .aplayer-volume-bar
        height: 100%
        background: var(--efu-main)
        border-radius: 4px
        width: 100%
        position: relative
        .aplayer-volume
          height: 100%
          background: var(--efu-main)
          border-radius: 4px
          width: 60%
          transition: width 0.1s ease

  .aplayer-list
    position: absolute
    bottom: 100%
    left: 0
    width: 340px
    max-height: 220px
    background: #fff
    border: 1px solid #e0e0e0
    border-radius: 8px
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12)
    overflow: hidden
    margin-bottom: 10px
    ol
      list-style: none
      margin: 0
      padding: 0
      max-height: 200px
      overflow-y: auto
      li
        display: flex
        align-items: center
        padding: 10px 16px
        cursor: pointer
        transition: background 0.3s ease
        border-bottom: 1px solid #e0e0e0
        &:hover
          background: #f7f7fa
        &:last-child
          border-bottom: none
        &.aplayer-list-light
          background: var(--efu-main)
          color: #fff
        .aplayer-list-cur
          width: 4px
          height: 4px
          background: var(--efu-main)
          border-radius: 50%
          margin-right: 8px
          opacity: 0
        &.aplayer-list-light .aplayer-list-cur
          opacity: 1
        .aplayer-list-index
          font-size: 12px
          color: #888
          margin-right: 8px
          min-width: 20px
        .aplayer-list-title
          flex: 1
          font-size: 15px
          font-weight: 600
          color: #222
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
        .aplayer-list-author
          font-size: 13px
          color: #666
          margin-left: 8px
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
          max-width: 80px

@keyframes music_rotate
  0%
    transform: rotate(0deg)

  100%
    transform: rotate(360deg)

// ÁßªÂä®Á´ØÈÄÇÈÖç
@media (max-width: 768px)
  #nav-music
    bottom: 15px
    left: 15px
    transform: scale(0.9)
    min-width: 60px
    .nav-music-capsule
      font-size: 13px
      padding: 0 10px
  #local-music-player
    bottom: 15px
    left: 15px
    width: 98vw
    min-width: 0
    .aplayer-list
      width: 96vw
