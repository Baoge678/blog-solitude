#nav-music
  position: fixed
  bottom: 20px
  left: 20px
  z-index: 9999
  display: block
  margin: 0
  padding: 0
  width: auto
  height: auto
  background: none
  color: var(--efu-fontcolor)
  border-radius: 0
  transition: none
  box-shadow: none
  backdrop-filter: none
  font-size: 15px
  min-width: auto

  .nav-music-capsule
    display: none
    align-items: center
    gap: 6px
    padding: 0 16px
    font-weight: 600
    font-size: 15px
    letter-spacing: 1px
    .capsule-icon
      font-size: 18px
      margin-right: 2px
    .capsule-text
      font-size: 15px
      color: var(--efu-main)

  &:hover
    transform: none
    box-shadow: none
    background: none
    color: var(--efu-fontcolor)

  &.playing
    box-shadow: none
    background: none
    color: var(--efu-fontcolor)

  &.expanded
    display: block

  // 底部胶囊播放器优化 - 带伸缩功能
  meting-js
    .aplayer
      // 增加宽度，确保不遮挡右侧按键
      width: 450px !important
      min-width: 450px !important
      max-width: 450px !important
      position: fixed !important
      bottom: 20px !important
      left: 20px !important
      z-index: 9998 !important
      background: var(--efu-card-bg) !important
      border: 1px solid var(--efu-border) !important
      border-radius: 12px !important
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1) !important
      transition: all 0.3s ease !important
      
      // 收缩状态样式
      &.collapsed
        width: 60px !important
        min-width: 60px !important
        max-width: 60px !important
        height: 60px !important
        border-radius: 50% !important
        overflow: hidden !important
        
        .aplayer-info,
        .aplayer-controller,
        .aplayer-bar-wrap,
        .aplayer-time
          display: none !important
        
        .aplayer-pic
          display: block !important
          width: 60px !important
          height: 60px !important
          border-radius: 50% !important
          overflow: hidden !important
          
          img
            width: 100% !important
            height: 100% !important
            object-fit: cover !important
        
        .collapse-btn
          display: none !important
        
        .expand-btn
          display: block !important
          position: absolute !important
          top: 50% !important
          left: 50% !important
          transform: translate(-50%, -50%) !important
          font-size: 20px !important
          color: var(--efu-white) !important
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important
          cursor: pointer !important
          z-index: 10000 !important
      
      // 确保播放器内容布局合理
      .aplayer-info
        width: 100% !important
        display: flex !important
        flex-direction: column !important
        padding: 12px 16px 8px 16px !important
        position: relative !important
        
        .aplayer-music
          width: 100% !important
          margin-bottom: 8px !important
          
          .aplayer-title
            max-width: 380px !important
            overflow: hidden !important
            text-overflow: ellipsis !important
            white-space: nowrap !important
            font-size: 14px !important
            font-weight: 600 !important
            line-height: 1.4 !important
            
          .aplayer-author
            max-width: 380px !important
            overflow: hidden !important
            text-overflow: ellipsis !important
            white-space: nowrap !important
            font-size: 12px !important
            color: #666 !important
            line-height: 1.4 !important
      
      // 控制栏布局优化 - 确保播放模式按钮可见
      .aplayer-controller
        display: flex !important
        align-items: center !important
        justify-content: space-between !important
        padding: 8px 16px !important
        gap: 12px !important
        border-top: 1px solid var(--efu-border) !important
        
        // 左侧播放控制按钮组 - 上一首、播放/暂停、下一首
        .aplayer-icon-back,
        .aplayer-icon-play,
        .aplayer-icon-forward
          display: inline-block !important
          opacity: 1 !important
          visibility: visible !important
          cursor: pointer !important
          margin: 0 4px !important
          font-size: 16px !important
          color: #000 !important
          transition: all 0.2s ease !important
          background: #f0f0f0 !important
          border-radius: 6px !important
          padding: 6px !important
          border: 1px solid #ddd !important
          
          &:hover
            color: #0066cc !important
            transform: scale(1.1) !important
            background: #e6f3ff !important
            border-color: #0066cc !important
        
        // 播放模式按钮组 - 确保不被遮挡
        .aplayer-icon-order,
        .aplayer-icon-loop,
        .aplayer-icon-menu
          display: inline-block !important
          opacity: 1 !important
          visibility: visible !important
          cursor: pointer !important
          margin: 0 4px !important
          font-size: 14px !important
          color: #000 !important
          transition: all 0.2s ease !important
          background: #f0f0f0 !important
          border-radius: 6px !important
          padding: 6px !important
          border: 1px solid #ddd !important
          
          &:hover
            color: #0066cc !important
            transform: scale(1.1) !important
            background: #e6f3ff !important
            border-color: #0066cc !important
        
        // 音量控制 - 显示音量滑块，深蓝色主题
        .aplayer-volume-wrap
          display: flex !important
          align-items: center !important
          opacity: 1 !important
          visibility: visible !important
          margin-left: 12px !important
          
          .aplayer-volume-bar-wrap
            display: block !important
            opacity: 1 !important
            width: 60px !important
            margin-right: 6px !important
            
            .aplayer-volume-bar
              display: block !important
              opacity: 1 !important
              height: 6px !important
              background: #ddd !important
              border-radius: 3px !important
              cursor: pointer !important
              border: 1px solid #ccc !important
              
              .aplayer-volume
                display: block !important
                opacity: 1 !important
                background: #0066cc !important
                border-radius: 3px !important
                height: 100% !important
                
              .aplayer-volume-thumb
                display: block !important
                opacity: 1 !important
                background: #0066cc !important
                border-radius: 50% !important
                width: 12px !important
                height: 12px !important
                top: -3px !important
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important
                border: 2px solid #fff !important
            
          .aplayer-icon-volume-down,
          .aplayer-icon-volume-up
            display: inline-block !important
            opacity: 1 !important
            cursor: pointer !important
            margin-left: 6px !important
            font-size: 14px !important
            color: #000 !important
            background: #f0f0f0 !important
            border-radius: 6px !important
            padding: 6px !important
            border: 1px solid #ddd !important
            transition: all 0.2s ease !important
            
            &:hover
              color: #0066cc !important
              background: #e6f3ff !important
              border-color: #0066cc !important
      
      // 进度条优化 - 确保可见
      .aplayer-bar-wrap
        display: block !important
        opacity: 1 !important
        visibility: visible !important
        margin: 0 16px !important
        padding: 8px 0 !important
        
        .aplayer-bar
          display: block !important
          opacity: 1 !important
          height: 8px !important
          background: #ddd !important
          border-radius: 4px !important
          cursor: pointer !important
          border: 1px solid #ccc !important
          
          .aplayer-played
            display: block !important
            opacity: 1 !important
            background: #0066cc !important
            border-radius: 4px !important
            
          .aplayer-thumb
            display: block !important
            opacity: 1 !important
            background: #0066cc !important
            border-radius: 50% !important
            width: 16px !important
            height: 16px !important
            top: -4px !important
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3) !important
            border: 2px solid #fff !important
            
          .aplayer-loaded
            display: block !important
            opacity: 1 !important
            background: #bbb !important
            border-radius: 4px !important
      
      // 时间显示
      .aplayer-time
        display: flex !important
        opacity: 1 !important
        visibility: visible !important
        justify-content: space-between !important
        font-size: 12px !important
        color: #000 !important
        margin: 0 16px 8px 16px !important
        font-weight: 500 !important
        
        .aplayer-ptime,
        .aplayer-dtime
          display: inline-block !important
          opacity: 1 !important
      
      // 歌词区域优化 - 扩大显示区域
      .aplayer-lrc
        display: block !important
        opacity: 1 !important
        visibility: visible !important
        height: 60px !important
        max-height: 60px !important
        overflow: hidden !important
        margin: 8px 16px !important
        padding: 8px !important
        background: #f8f9fa !important
        border-radius: 6px !important
        border: 1px solid #e9ecef !important
        
        .aplayer-lrc-contents
          display: block !important
          opacity: 1 !important
          
          p
            display: block !important
            opacity: 0.7 !important
            font-size: 12px !important
            line-height: 1.5 !important
            margin: 4px 0 !important
            color: #333 !important
            transition: all 0.3s ease !important
            
            &.aplayer-lrc-current
              opacity: 1 !important
              color: #0066cc !important
              font-weight: 600 !important
              font-size: 13px !important
      
      // 收缩按钮 - 右上角
      .collapse-btn
        position: absolute !important
        top: 8px !important
        right: 8px !important
        width: 24px !important
        height: 24px !important
        background: rgba(0, 0, 0, 0.3) !important
        border-radius: 50% !important
        display: flex !important
        align-items: center !important
        justify-content: center !important
        cursor: pointer !important
        z-index: 10000 !important
        transition: all 0.2s ease !important
        
        &:hover
          background: rgba(0, 0, 0, 0.5) !important
          transform: scale(1.1) !important
        
        &::before
          content: "−" !important
          color: var(--efu-white) !important
          font-size: 16px !important
          font-weight: bold !important
          line-height: 1 !important
      
      // 展开按钮 - 胶囊状态
      .expand-btn
        display: none !important

// 移动端适配
@media (max-width: 768px)
  #nav-music
    bottom: 15px
    left: 15px
    transform: none
    min-width: auto
    .nav-music-capsule
      display: none
    
    meting-js
      .aplayer
        width: 350px !important
        min-width: 350px !important
        max-width: 350px !important
        bottom: 15px !important
        left: 15px !important
        
        &.collapsed
          width: 50px !important
          min-width: 50px !important
          max-width: 50px !important
          height: 50px !important
          
          .aplayer-pic
            width: 50px !important
            height: 50px !important
        
        .aplayer-info
          padding: 10px 12px 6px 12px !important
          
          .aplayer-music
            margin-bottom: 6px !important
            
            .aplayer-title
              max-width: 280px !important
              font-size: 13px !important
              
            .aplayer-author
              max-width: 280px !important
              font-size: 11px !important
        
        .aplayer-controller
          padding: 6px 12px !important
          gap: 8px !important
          
          .aplayer-icon-back,
          .aplayer-icon-play,
          .aplayer-icon-forward,
          .aplayer-icon-order,
          .aplayer-icon-loop,
          .aplayer-icon-menu
            font-size: 14px !important
            margin: 0 3px !important
            padding: 4px !important
        
        .aplayer-volume-wrap
          margin-left: 8px !important
          
          .aplayer-volume-bar-wrap
            width: 50px !important
            
          .aplayer-icon-volume-down,
          .aplayer-icon-volume-up
            font-size: 12px !important
            margin-left: 4px !important
            padding: 4px !important
        
        .collapse-btn
          width: 20px !important
          height: 20px !important
          top: 6px !important
          right: 6px !important
          
          &::before
            font-size: 14px !important

// 全局样式覆盖 - 确保进度条和音量控制可见
.aplayer
  .aplayer-bar-wrap
    display: block !important
    opacity: 1 !important
    visibility: visible !important
    margin: 0 16px !important
    padding: 8px 0 !important
    
    .aplayer-bar
      display: block !important
      opacity: 1 !important
      height: 8px !important
      background: #ddd !important
      border-radius: 4px !important
      cursor: pointer !important
      border: 1px solid #ccc !important
      
      .aplayer-played
        display: block !important
        opacity: 1 !important
        background: #0066cc !important
        border-radius: 4px !important
        
      .aplayer-thumb
        display: block !important
        opacity: 1 !important
        background: #0066cc !important
        border-radius: 50% !important
        width: 16px !important
        height: 16px !important
        top: -4px !important
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3) !important
        border: 2px solid #fff !important
        
      .aplayer-loaded
        display: block !important
        opacity: 1 !important
        background: #bbb !important
        border-radius: 4px !important

  .aplayer-volume-wrap
    display: flex !important
    align-items: center !important
    opacity: 1 !important
    visibility: visible !important
    margin-left: 12px !important
    
    .aplayer-volume-bar-wrap
      display: block !important
      opacity: 1 !important
      width: 60px !important
      margin-right: 6px !important
      
      .aplayer-volume-bar
        display: block !important
        opacity: 1 !important
        height: 6px !important
        background: #ddd !important
        border-radius: 3px !important
        cursor: pointer !important
        border: 1px solid #ccc !important
        
        .aplayer-volume
          display: block !important
          opacity: 1 !important
          background: #0066cc !important
          border-radius: 3px !important
          height: 100% !important
          
        .aplayer-volume-thumb
          display: block !important
          opacity: 1 !important
          background: #0066cc !important
          border-radius: 50% !important
          width: 12px !important
          height: 12px !important
          top: -3px !important
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important
          border: 2px solid #fff !important

  .aplayer-time
    display: flex !important
    opacity: 1 !important
    visibility: visible !important
    justify-content: space-between !important
    font-size: 12px !important
    color: #000 !important
    margin: 0 16px 8px 16px !important
    font-weight: 500 !important
    
    .aplayer-ptime,
    .aplayer-dtime
      display: inline-block !important
      opacity: 1 !important 